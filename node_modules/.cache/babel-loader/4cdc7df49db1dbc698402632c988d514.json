{"ast":null,"code":"var ever = require('ever');\nmodule.exports = function (knob) {\n  var documentEvents = ever(window.document);\n  ever(knob.canvas).on('mousedown', function (e) {\n    e.preventDefault();\n    var offset = getOffset(knob.canvas);\n    function mouseMove(e) {\n      knob.setValue(xyToValue(knob.options, e.pageX, e.pageY, offset), true);\n    }\n    function mouseUp(e) {\n      knob.options.activeClass && knob.classList.remove(knob.options.activeClass);\n      documentEvents.removeListener('mousemove', mouseMove);\n      documentEvents.removeListener('mouseup', mouseUp);\n    }\n    knob.options.activeClass && knob.classList.add(knob.options.activeClass);\n    documentEvents.on('mousemove', mouseMove).on('mouseup', mouseUp);\n    mouseMove(e);\n  }).on('touchstart', function (e) {\n    e.preventDefault();\n    var touchIndex = e.touches.length - 1;\n    var offset = getOffset(knob.canvas);\n    function touchMove(e) {\n      knob.setValue(xyToValue(knob.options, e.touches[touchIndex].pageX, e.touches[touchIndex].pageY, offset), true);\n    }\n    function touchEnd() {\n      knob.options.activeClass && knob.classList.remove(knob.options.activeClass);\n      documentEvents.removeListener('touchmove', touchMove);\n      documentEvents.removeListener('touchend', touchEnd);\n    }\n    knob.options.activeClass && knob.classList.add(knob.options.activeClass);\n    documentEvents.on('touchmove', touchMove).on('touchend', touchEnd);\n    touchMove(e);\n  });\n};\nfunction xyToValue(options, x, y, offset) {\n  var PI2 = 2 * Math.PI;\n  var w2 = options.width / 2;\n  var angleArc = options.angleArc * Math.PI / 180;\n  var angleOffset = options.angleOffset * Math.PI / 180;\n  var angle = Math.atan2(x - (offset.x + w2), -(y - offset.y - w2)) - angleOffset;\n  if (angleArc != PI2 && angle < 0 && angle > -0.5) {\n    angle = 0;\n  } else if (angle < 0) {\n    angle += PI2;\n  }\n  var result = ~~(0.5 + angle * (options.max - options.min) / angleArc) + options.min;\n  return Math.max(Math.min(result, options.max), options.min);\n}\nfunction getOffset(element) {\n  var result = {\n    x: 0,\n    y: 0\n  };\n  while (element) {\n    result.x += element.offsetLeft;\n    result.y += element.offsetTop;\n    element = element.offsetParent;\n  }\n  return result;\n}","map":{"version":3,"names":["ever","require","module","exports","knob","documentEvents","window","document","canvas","on","e","preventDefault","offset","getOffset","mouseMove","setValue","xyToValue","options","pageX","pageY","mouseUp","activeClass","classList","remove","removeListener","add","touchIndex","touches","length","touchMove","touchEnd","x","y","PI2","Math","PI","w2","width","angleArc","angleOffset","angle","atan2","result","max","min","element","offsetLeft","offsetTop","offsetParent"],"sources":["/home/rifat/uk client/garage/garage-frontend-2/theme/node_modules/knob/handle_change.js"],"sourcesContent":["var ever = require('ever')\n\nmodule.exports = function(knob){\n  var documentEvents = ever(window.document)\n\n  ever(knob.canvas).on('mousedown', function(e){\n    e.preventDefault()\n\n    var offset = getOffset(knob.canvas)\n\n    function mouseMove(e) {\n      knob.setValue(xyToValue(knob.options, e.pageX, e.pageY, offset), true)\n    }\n\n    function mouseUp(e){\n      knob.options.activeClass && knob.classList.remove(knob.options.activeClass)\n      documentEvents.removeListener('mousemove', mouseMove)\n      documentEvents.removeListener('mouseup', mouseUp)\n    }\n\n    knob.options.activeClass && knob.classList.add(knob.options.activeClass)\n\n    documentEvents.on('mousemove', mouseMove).on('mouseup', mouseUp)\n\n    mouseMove(e)\n\n  }).on('touchstart', function(e){\n    e.preventDefault()\n\n    var touchIndex = e.touches.length - 1\n    var offset = getOffset(knob.canvas)\n\n    function touchMove(e){\n      knob.setValue(\n        xyToValue(knob.options, e.touches[touchIndex].pageX, e.touches[touchIndex].pageY, offset), true\n      )\n    }\n\n    function touchEnd(){\n      knob.options.activeClass && knob.classList.remove(knob.options.activeClass)\n      documentEvents.removeListener('touchmove', touchMove)\n      documentEvents.removeListener('touchend', touchEnd)\n    }\n\n    knob.options.activeClass && knob.classList.add(knob.options.activeClass)\n\n    documentEvents.on('touchmove', touchMove).on('touchend', touchEnd)\n\n    touchMove(e)\n  })\n}\n\nfunction xyToValue(options, x, y, offset){\n  var PI2 = 2*Math.PI\n  var w2 = options.width / 2\n  var angleArc = options.angleArc * Math.PI / 180\n  var angleOffset = options.angleOffset * Math.PI / 180;\n\n  var angle = Math.atan2(x - (offset.x + w2), - (y - offset.y - w2)) - angleOffset\n\n  if(angleArc != PI2 && (angle < 0) && (angle > -0.5)) {\n    angle = 0\n  } else if (angle < 0) {\n    angle += PI2\n  }\n\n  var result = ~~ (0.5 + (angle * (options.max - options.min) / angleArc)) + options.min;\n  return Math.max(Math.min(result, options.max), options.min)\n}\n\nfunction getOffset(element){\n  var result = {x: 0, y: 0};\n  while (element) {\n    result.x += element.offsetLeft\n    result.y += element.offsetTop\n    element = element.offsetParent\n  } \n\n  return result\n}"],"mappings":"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"},"metadata":{},"sourceType":"script"}